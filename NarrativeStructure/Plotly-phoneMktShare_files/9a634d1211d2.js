window.analytics=(function(window,ENV){'use strict';var isArray=Array.isArray;var isObject=function(val){return val!=null&&typeof val==='object'&&isArray(val)===false&&Object.prototype.toString.call(val)==='[object Object]';};function mockFn(){function fn(){var args=[].slice.call(arguments);fn.mock.calls.push(args);}
fn.mock={calls:[]};return fn;}
function MockMixpanel(){this.track=mockFn();this.identify=mockFn();this.alias=mockFn();this.get_distinct_id=mockFn();this.register_once=mockFn();this.people={track_charge:mockFn(),set:mockFn()};}
MockMixpanel.prototype._mockCompileCalls=function mockCompileCalls(obj){var calls={};Object.keys(obj).forEach(function(key){if(isObject(obj[key])){calls[key]=mockCompileCalls(obj[key]);}else if(isObject(obj[key].mock)){calls[key]=[].slice.call(obj[key].mock.calls);}});return calls;};MockMixpanel.prototype._mockClearCalls=function mockClearCalls(obj){Object.keys(obj).forEach(function(key){if(isObject(obj[key])){mockClearCalls(obj[key]);}else if(isObject(obj[key].mock)){obj[key].mock.calls=[];}});};MockMixpanel.prototype.mockClearCalls=function(){this._mockClearCalls(this);};MockMixpanel.prototype.mockCompileCalls=function(){return this._mockCompileCalls(this);};if(!ENV.MIXPANEL_ENABLED||(typeof window.mixpanel==='undefined')){window.mixpanel=new MockMixpanel();}
function _init(){if(isUserSignedIn()){var username=getSignedInUsername();mixpanel.identify(username);}
if(window.location.search.indexOf('utm_campaign=ambassador')>-1){track('Page visit');}}
function track(event,baseData,fetchData){var fetch=fetchData||{};if(fetch.embeddingDomain){var domain=_embeddingDomain();baseData["Embedding domain"]=domain;baseData["Embedded on plot.ly"]=(domain.indexOf('plot.ly')!=-1);}
var fullData=_withPageWideProperties(baseData||{})
console.log("Mixpanel",event,fullData)
mixpanel.track(event,fullData);};function _embeddingDomain(){if(window.location==window.parent.location){return window.location.host;}else{var parser=document.createElement('a')
parser.href=document.referrer;return parser.host;}}
function _withPageWideProperties(extraProperties){var p=_getUrls();p.plotlyUsername=getSignedInUsername();for(var ep in extraProperties){p[ep]=extraProperties[ep];}
return p;}
function _getUrls(){function Urls(url){this.url=url;this.groupUrl=url;}
Urls.prototype.get=function(){return{url:this.url,url_group:this.groupUrl};};Urls.prototype.groupUrlByStart=function(startUrls,group){for(var i in startUrls){if(this.url.indexOf(startUrls[i])===0){this.groupUrl=group;}}};Urls.prototype.shareplotOrProfile=function(){if(this.url.indexOf('~')===1||this.url.indexOf('%7')===1){var secondSlashIndex=this.url.substr(1,this.url.length).indexOf('/');secondSlashIndex=(secondSlashIndex===-1?-1:secondSlashIndex+1);if(secondSlashIndex===-1||secondSlashIndex===this.url.length-1){this.groupUrl='profile';}else{this.groupUrl='shareplot';}}};var urls=new Urls(window.location.pathname);urls.shareplotOrProfile();var apiLangs=['/python','/matlab','/r','/nodejs','/julia','/matplotlib','/ggplot2'];urls.groupUrlByStart(apiLangs,'apiDocs');var devApis=['/javascript-graphing-library','/rest','/streaming'];urls.groupUrlByStart(devApis,'apiDocsDev');var learnUrls=['/how-to-sign-up-to-plotly','/add-data-to-the-plotly-grid','/how-to-share-and-print-plotly-graphs','/how-to-embed-plotly-graphs-in-websites','/how-to-create-a-line-of-best-fits','/how-to-make-a-line-graph-and-scatter-plot-online','/how-to-make-a-bar-chart-online','/how-to-make-an-area-chart-online','/how-to-make-a-histogram-online','/how-to-make-a-box-plot-online','/how-to-make-a-heatmap-online','/how-to-make-a-graph-with-error-bars-online','/how-to-make-a-graph-with-multiple-axes-online','/basic-statistics-tutorial','/histogram','/box-plot','/how-to-make-a-3d-scatter-plot-online/','/how-to-make-a-3d-line-chart-online/','/date-format-and-time-series/','/LaTeX-basics/','/adding-HTML-and-links-to-charts/'];urls.groupUrlByStart(learnUrls,'learnDocs');var excelUrls=['/create-charts-in-excel-with-plotly','/how-to-make-a-line-graph-and-scatter-plot-with-excel','/how-to-make-a-bar-chart-with-excel','/how-to-make-an-area-chart-with-excel','/how-to-make-a-histogram-with-excel','/how-to-make-a-box-plot-with-excel','/how-to-make-a-heatmap-with-excel','/how-to-make-a-graph-with-error-bars-with-excel','/how-to-make-a-graph-with-multiple-axes-with-excel'];urls.groupUrlByStart(excelUrls,'excelDocs');var workshopUrls=['/workshop','/arduino','/raspberry-pi','/electric-imp'];urls.groupUrlByStart(workshopUrls,'workshop');var productUrls=['/product','/online-graphing-and-statistics-for-educators'];urls.groupUrlByStart(productUrls,'product');return urls.get();}
function identifyUser(username,email,date_joined){try{mixpanel.identify(username);mixpanel.register_once({$email:email,$username:username,date_joined:date_joined});}
catch(e){console.log(e);}}
function peopleSet(username,props){mixpanel.people.set(props);mixpanel.identify(username);}
function markExperiment(experiment_name,bucket){var key="Experiment:"+experiment_name;var data={};data[key]=bucket;mixpanel.register_once(data);}
_init();return{alias:mixpanel.alias,identifyUser:identifyUser,markExperiment:markExperiment,track:track,peopleSet:peopleSet};})(window,ENV);